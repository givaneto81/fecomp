{% extends 'base.html' %}

{% block title %}In√≠cio{% endblock %}

{% block content %}
<h2 class="page-title">Ol√°, {{ session['user_name'] }}!</h2>

<div class="grid-inicio">
    <div class="cartao-boasvindas">
        <h3>üéØ Dica do Dia</h3>
        <p id="texto-dica">Carregando...</p>
        
        <button class="btn-ia" onclick="window.location.href='{{ url_for('visoes.pagina_chat') }}'">
            <i data-feather="message-circle"></i>
            <span>Tirar d√∫vida com a IA</span>
        </button>
    </div>

    <div class="cartao-atalho" role="button" tabindex="0" aria-label="Abrir Minhas Mat√©rias" onclick="window.location.href='{{ url_for('visoes.pagina_materias') }}'">
        <i data-feather="book-open"></i>
        <h4>Minhas Mat√©rias</h4>
        <p>Aceda e organize os seus materiais de estudo.</p>
    </div>
</div>

<div class="subject-grid">
    </div>

{% endblock %}

{% block page_scripts %}
<script>
    // Fetch para obter a Dica do Dia
    fetch('/api/dica_do_dia')
      .then(response => response.json())
      .then(data => {
        const elementoDica = document.getElementById('texto-dica');
        if (data.dica) {
            elementoDica.textContent = data.dica;
        } else {
            elementoDica.textContent = 'N√£o foi poss√≠vel carregar a dica de hoje. Estude bastante!';
        }
      })
      .catch(error => {
        console.error('Erro ao buscar dica:', error);
        document.getElementById('texto-dica').textContent = 'Tente novamente mais tarde para ver a dica de hoje.';
      });

    // Habilita ativa√ß√£o por teclado (Enter / Space) para elementos com role="button"
    document.addEventListener('DOMContentLoaded', function () {
        document.querySelectorAll('[role="button"]').forEach(function(el) {
            el.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    el.click();
                }
            });
        });
    });
</script>
<style>
    .grid-inicio {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        width: 100%;
        max-width: 900px;
        margin-bottom: 30px;
    }
    /* Garanto empilhamento previs√≠vel e estilos de foco para navega√ß√£o por teclado */
    .cartao-boasvindas, .cartao-atalho {
        position: relative;
        z-index: 1;
        background-color: var(--content-bg-color);
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 4px 10px var(--shadow-color);
    }

    /* Se houver sobreposi√ß√£o, o atalho pode subir visualmente no hover/foco */
    .cartao-atalho:hover,
    .cartao-atalho:focus {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px var(--shadow-color);
        z-index: 2;
    }

    /* Estilos de foco vis√≠vel (acessibilidade) */
    .cartao-atalho:focus {
        outline: 3px solid var(--primary-color);
        outline-offset: 4px;
    }

    .cartao-boasvindas h3 {
        margin-top: 0;
        color: var(--primary-color);
    }
    .cartao-atalho {
        text-align: center;
        cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s;
    }
    .cartao-atalho .feather {
        width: 48px;
        height: 48px;
        color: var(--primary-color);
        margin-bottom: 10px;
    }

    /* garante que bot√µes tenham foco claro */
    .btn-ia:focus, .btn-tutorial:focus {
        outline: 3px solid rgba(0,123,255,0.25);
        outline-offset: 3px;
    }

.btn-ia {
    /* Estrutura e Fonte */
    display: inline-flex;
    align-items: center;
    gap: 8px; /* Espa√ßo entre o √≠cone e o texto */
    padding: 10px 20px;
    font-size: 0.9em;
    font-weight: 600;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    
    /* Cores e Gradiente "Sexy" */
    color: white;
    background: linear-gradient(45deg, var(--primary-color), #0056b3);
    box-shadow: 0 4px 15px rgba(0, 123, 255, 0.2);

    /* Anima√ß√£o Suave */
    transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
}

.btn-ia .feather {
    width: 18px;
    height: 18px;
}

/* Efeito Hover (Flutuar) */
.btn-ia:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 20px rgba(0, 123, 255, 0.3);
    background: linear-gradient(45deg, #0069d9, var(--primary-hover-color));
}

/* Efeito de Pressionar */
.btn-ia:active {
    transform: translateY(-1px);
    box-shadow: 0 2px 10px rgba(0, 123, 255, 0.2);
}

/* Ajustes para o Dark Mode */
body.dark-mode .btn-ia {
    box-shadow: 0 4px 15px rgba(13, 110, 253, 0.25);
}

body.dark-mode .btn-ia:hover {
    box-shadow: 0 6px 20px rgba(13, 110, 253, 0.35);
}

/* Protege a grid de sujeitos caso algo precise sobrepor */
.subject-grid {
    position: relative;
    z-index: 0;
}
</style>
{% endblock %}